import React, { Component } from "react";
import PropTypes from "prop-types";
import { NOTE_COORDS } from "../config";

const LENGTH = 100;

class Staff extends Component {
  placeNote = y => {
    const notePos = LENGTH * 0.6;
    const startLedger = notePos - 7;
    const endLedger = notePos + 7;
    const ledgerLine = (
      <path d={`M ${startLedger}, 65.5 L ${endLedger}, 65.5`} stroke="black" />
    );

    return (
      <g key={y}>
        {y === 65.5 && ledgerLine}
        <circle cx={notePos} cy={y} r="3" stroke="black" strokeWidth="3" />
      </g>
    );
  };

  render() {
    const { notes } = this.props;    

    return (
      <svg width={LENGTH} height="140">
        <g style={{ fill: "none", stroke: "gray", strokeWidth: 1 }}>
          <path d={`M 0, 15.5 L ${LENGTH}, 15.5`} />
          <path d={`M 0, 25.5 L ${LENGTH}, 25.5`} />
          <path d={`M 0, 35.5 L ${LENGTH}, 35.5`} />
          <path d={`M 0, 45.5 L ${LENGTH}, 45.5`} />
          <path d={`M 0, 55.5 L ${LENGTH}, 55.5`} />

          <path d={`M 0, 89.5  L ${LENGTH}, 89.5`} />
          <path d={`M 0, 99.5  L ${LENGTH}, 99.5`} />
          <path d={`M 0, 109.5 L ${LENGTH}, 109.5`} />
          <path d={`M 0, 119.5 L ${LENGTH}, 119.5`} />
          <path d={`M 0, 129.5 L ${LENGTH}, 129.5`} />
        </g>

        {notes.map(note => {
          const y = NOTE_COORDS[note];

          if (!y) return null;
          return this.placeNote(y);
        })}

        <g transform="translate(-15)">
          <path d="M 29.782048,1.0809801 C 29.714578,1.1164769 29.471963,1.3649544 29.229347,1.6152067 C 26.755565,4.1248292 25.245688,7.3071157 24.861403,10.842595 C 24.794106,11.44604 24.794106,12.896084 24.827754,13.852722 C 24.969251,17.421924 25.515223,20.10548 26.930711,24.666817 L 27.099299,25.305759 L 26.101745,26.61559 C 22.873025,30.823734 21.632683,32.696189 20.567659,34.962659 C 19.502635,37.223804 18.983755,39.275518 18.916285,41.541987 C 18.815166,45.673813 20.60148,49.571359 23.796379,52.004664 C 26.411831,54.020881 29.573081,54.839082 32.976947,54.340352 C 33.253384,54.30663 33.496,54.271133 33.496,54.30663 L 33.496,56.038873 C 33.496,59.998539 33.253384,61.661563 32.430976,63.395581 C 31.912096,64.490657 31.291925,65.301758 30.536987,65.869707 C 29.68093,66.542371 28.818143,66.826345 27.753119,66.826345 C 26.546598,66.826345 25.481574,66.473152 24.517669,65.731269 C 24.214313,65.516514 23.695261,64.982287 23.486294,64.669915 L 23.317878,64.45516 L 23.452645,64.524379 C 24.625517,64.948565 26.135394,64.421438 26.930711,63.326362 C 27.577801,62.438943 27.753119,61.342092 27.409385,60.177798 C 26.998181,58.694032 25.858957,57.703672 24.450199,57.634453 C 23.108911,57.591857 21.733801,58.264521 21.012512,59.435915 C 20.46654,60.316235 20.325043,61.377589 20.635129,62.756639 C 21.012512,64.593597 22.185384,66.2229 23.8302,67.215035 C 24.901954,67.887699 26.169043,68.276388 27.443033,68.345607 C 29.714578,68.414826 31.709859,67.31975 33.152266,65.127824 C 34.116171,63.644058 34.662142,61.945537 34.803639,59.860101 C 34.938579,58.479277 34.938579,57.875831 34.972228,55.900435 L 34.972228,53.882443 L 35.315962,53.736907 C 36.72472,53.176057 37.931241,52.253141 38.962616,50.94331 C 40.715109,48.717662 41.301631,45.785627 40.580341,42.922812 C 39.926522,40.265878 38.207678,38.006508 35.902484,36.835114 C 34.803639,36.27249 33.731886,35.988516 32.464797,35.919297 L 31.878275,35.878476 L 31.743507,35.28213 C 31.325574,33.755768 30.536987,31.143205 29.748227,28.633582 L 29.573081,28.134853 L 30.159431,27.321976 C 32.599564,24.105968 33.940853,21.734783 34.803639,19.363598 C 35.592399,17.137949 35.868663,14.802261 35.592399,12.679554 C 35.113725,8.826378 33.010769,4.0556105 30.678484,1.4696699 C 30.26055,1.0117614 30.058312,0.90882075 29.782048,1.0809801 z M 31.912096,6.21204 C 31.979393,6.3167555 32.532094,7.4455532 32.700683,7.8342429 C 32.875829,8.3329727 33.044417,9.0411335 33.152266,9.609082 C 33.219735,10.205428 33.219735,12.187923 33.152266,12.791369 C 32.774883,16.112092 31.568189,19.010405 28.95291,22.76064 C 28.717024,23.113833 28.474409,23.468801 28.37329,23.607238 L 28.197972,23.821994 L 28.096853,23.433304 C 27.476682,21.450808 26.856684,18.941186 26.654446,17.491142 C 26.546598,16.784756 26.546598,15.439428 26.620625,14.733042 C 26.930711,12.395579 27.71947,10.45568 29.128228,8.6524437 C 29.471963,8.1874359 30.294371,7.3426125 30.745953,6.9876447 C 31.089688,6.7036704 31.810977,6.1765432 31.844626,6.1765432 C 31.844626,6.1765432 31.878275,6.21204 31.912096,6.21204 z M 28.851792,30.720793 C 29.640379,33.230416 30.402219,35.954794 30.368398,35.988516 C 30.368398,35.988516 30.193252,36.057734 30.058312,36.057734 C 29.60673,36.16245 28.851792,36.412702 28.440587,36.627458 C 27.685649,37.014373 27.099299,37.403062 26.512777,38.006508 C 24.726636,39.878963 24.072816,42.67256 24.861403,45.182182 C 25.171489,46.243536 25.757838,47.200174 26.546598,48.011276 C 27.166769,48.648443 27.786768,49.106351 28.649554,49.528763 C 29.060758,49.743519 29.128228,49.743519 29.337195,49.743519 C 29.539433,49.743519 29.573081,49.743519 29.714578,49.640578 C 29.916815,49.495041 30.058312,49.211067 30.058312,48.967914 C 30.024664,48.648443 29.916815,48.545502 29.471963,48.259753 C 27.341915,47.019141 26.310712,44.967427 26.890332,42.922812 C 27.308266,41.39645 28.575527,40.265878 30.32802,39.878963 C 30.678484,39.774247 31.325574,39.697929 31.365952,39.733426 C 31.365952,39.733426 31.500892,40.232156 31.709859,41.224291 C 32.356949,43.982391 32.808531,46.561232 33.084796,49.037133 C 33.287033,50.590117 33.462351,52.677328 33.388151,52.753646 C 33.354503,52.787368 32.667034,52.892083 32.013042,52.925805 C 29.883167,53.064243 28.063204,52.71105 26.236512,51.761511 C 25.205137,51.227284 24.382902,50.590117 23.594142,49.812737 C 22.320324,48.469184 21.599034,46.985419 21.423716,45.32062 C 21.356418,44.862711 21.390067,43.803132 21.457537,43.130468 C 21.84165,39.981904 23.075262,37.049869 25.656892,33.368853 C 26.378009,32.307499 28.406939,29.590221 28.474409,29.590221 L 28.851792,30.720793 z M 33.496,39.912685 C 36.1451,40.51613 38.09983,42.706282 38.585061,45.535375 C 38.618882,45.785627 38.618882,46.069602 38.618882,46.596729 C 38.618882,47.233896 38.618882,47.372334 38.551412,47.761023 C 38.477213,48.044998 38.409915,48.398191 38.342445,48.545502 C 37.931241,49.779015 37.034806,51.019628 36.00343,51.726014 C 35.626048,52.004664 34.904758,52.357857 34.871109,52.32236 C 34.871109,52.288638 34.837461,52.080982 34.837461,51.866226 C 34.729612,50.485401 34.426256,47.837341 34.116171,45.957787 C 33.839734,44.190047 33.253384,41.188794 32.943299,39.948182 L 32.875829,39.774247 L 32.976947,39.809744 C 33.044417,39.809744 33.253384,39.843466 33.496,39.912685 z " />
          <path d="M 26.268239,90.32599 C 23.731409,90.591131 21.427077,92.285653 20.245745,94.762001 C 19.716468,95.876952 19.451912,96.991903 19.387301,98.213931 C 19.387301,98.791801 19.419524,99.130026 19.555189,99.534536 C 20.013412,101.12878 21.627188,102.24373 23.273186,102.14346 C 24.854574,102.03808 26.106796,100.72257 26.332685,98.990658 C 26.435962,98.385593 26.300462,97.63606 26.035741,97.09898 C 25.345185,95.605013 23.634575,94.828286 22.22091,95.338172 L 21.956355,95.43845 L 22.020965,95.232795 C 22.776132,93.201749 24.196241,91.71458 25.842239,91.26928 C 27.423627,90.86477 28.998571,91.301572 30.21857,92.457315 C 32.361623,94.556346 33.1814,98.791801 32.129124,102.51567 C 31.896791,103.26011 31.703124,103.83628 31.309347,104.61301 C 30.515514,106.27354 29.527848,107.62813 28.011071,109.22068 C 26.003518,111.25342 23.402242,113.21819 19.716468,115.44809 C 19.025912,115.89338 18.961301,115.95967 18.961301,116.12624 C 18.961301,116.36588 19.154967,116.57154 19.387301,116.57154 C 19.419524,116.57154 19.516357,116.53754 19.587412,116.50525 C 19.652023,116.46446 19.981189,116.2979 20.310356,116.16533 C 27.391404,113.01253 31.832346,109.86483 34.369011,106.17326 C 35.885954,103.93655 36.673343,101.40072 36.673343,98.791801 C 36.673343,94.18413 33.904344,91.136709 29.134071,90.45856 C 28.146571,90.286899 26.991184,90.252907 26.268239,90.32599 z M 39.010062,93.300327 C 38.416174,93.439696 37.925729,93.944483 37.790063,94.556346 C 37.564174,95.504735 38.119231,96.454823 39.010062,96.653679 C 40.262284,96.959611 41.346782,95.84296 41.049838,94.556346 C 40.856172,93.638551 39.933117,93.069178 39.010062,93.300327 z M 39.010062,101.73894 C 38.416174,101.87151 37.925729,102.3763 37.790063,102.98647 C 37.564174,103.93655 38.119231,104.88665 39.010062,105.09229 C 40.262284,105.39143 41.346782,104.27477 41.049838,102.98647 C 40.856172,102.07717 39.933117,101.4993 39.010062,101.73894 z " />
        </g>
      </svg>
    );
  }
}

Staff.propTypes = {
  notes: PropTypes.arrayOf(PropTypes.number).isRequired
};

export default Staff;
